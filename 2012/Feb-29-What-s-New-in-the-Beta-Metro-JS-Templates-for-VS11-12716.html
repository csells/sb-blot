<!--
Date: 2/29/2012 6:06:48 PM  -08:00
Permalink: 12716
Disqus: 12716
Tags: tools,win8,telerik
-->
<h1>What’s New in the Beta Metro/JS Templates for VS11</h1>
<p>The Consumer Preview of Windows 8 (aka the Win8 beta) is now available for download, along with the matching Visual Studio 11 beta. You can download them both from <a href="http://msdn.microsoft.com/en-us/windows/apps/br229516.aspx">the Developer Center for Metro style Apps</a> and at least when I did the downloading this morning, it was smooth and worked well. In case you’re interested, I downloaded the ISO, not the setup, and I am currently writing this blog entry in Windows Live Writer running inside a WMWare Workstation 8.0 virtual machine running on the Windows 7 host OS running inside Boot Camp on my MacBook Pro. As someone said to me this morning: “That’s a lot of VMs!” Maybe so, but the Win8 and VS11 betas are running surprisingly well inside of my Inception-box.</p>  <h2>Metro/JS Templates for VS11 in BUILD</h2>  <p>If you played around with the Metro/JS templates in VS11 from the BUILD conference in September, you’ll have noticed that the generated apps were compliant with the Windows 8 UX style guidelines, but that two of the templates – Grip and Split – generated large amounts of code. That’s because these are pretty much the biggest apps that Microsoft has ever shipped as templates. They each have multiples pages and they work hard at being simple but feature complete Metro style apps.</p>  <p>However, as well as the BUILD templates implemented the Win8 UX, their code wasn’t the greatest, for the following reasons:</p>  <ul>   <li>The templates were attempting to codify best practices for a brand-new app model. That’s always going to take time to get right. </li>    <li>There was only so much time to get it right before BUILD – it was either have great code or implement a great UX, so the template team chose the latter. </li>    <li>The bonehead PM in charge at the time (me) decided it was a better choice to push the data model into each page instead of centralizing it. That was a bad idea. </li>    <li>The data model, spread as it was across nearly every JS file in the templates, was assumed to be static. However, the vast majority of apps get their data dynamically from some external source and the template-generated code made that very hard to implement. </li>    <li>There were a number of features that the templates needed that didn’t exist directly in the platform, either in WinJS, the IE DOM or in the WinRT libraries, so the templates needed to provide those features. </li> </ul>  <p>All of these reasons meant that the functionality of the generate Grid and Split apps made for an instructional start to building your own Metro style apps, assuming you were willing to wade through a great deal of code. The new templates in the Win8 beta solve nearly all of these problems.</p>  <h2><a href="http://go.microsoft.com/?linkid=9801754"><img style="margin: 0px 0px 5px 5px; display: inline; float: right" title="Get-VS-11-Beta" alt="Get-VS-11-Beta" align="right" src="/public/post-images/12716-124.png" width="218" height="78" /></a>Metro/JS Templates for VS11 Beta</h2>  <p>Out of the box, the Metro/JS templates in the VS11 beta (made available today, Feb 29, 2012), get more betterer as they get more complex.Let’s start simple and work our way up.</p>  <p><a href="/public/post-images/12716-125.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-126.png" width="644" height="364" /></a></p>  <h3></h3>  <h3>Blank Application</h3>  <p>The Blank Application template is almost the smallest Metro/JS app you can build, except that it includes a reference to the Microsoft Windows Library for JavaScript (aka WinJS):</p>  <p><a href="/public/post-images/12716-127.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-128.png" width="340" height="529" /></a></p>  <p>And to be clear, this is a brand new feature. Including WinJS as a reference instead of dropping the code into each project means that MS can shipped a single shared implementation instead of every app in the store duplicating the code. If you want to duplicate the code into your project, you can do so, but you’ll also have to update the URL references to the JS and CSS files from your HTML files, like this snippet from the generated default.html:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:d94a04ba-7a2b-4249-b85c-7ad18fe06018" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">default.html</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #006400">&lt;!-- WinJS references --&gt;</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">link</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">href</span><span style="background: #ffffff; color: #0000ff">=&quot;//Microsoft.WinJS.0.6/css/ui-dark.css&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">rel</span><span style="background: #ffffff; color: #0000ff">=&quot;stylesheet&quot;&gt;</span> </li>          <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">src</span><span style="background: #ffffff; color: #0000ff">=&quot;//Microsoft.WinJS.0.6/js/base.js&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">src</span><span style="background: #ffffff; color: #0000ff">=&quot;//Microsoft.WinJS.0.6/js/ui.js&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>       </ol>     </div>   </div> </div>  <p>In addition to the new syntax with the leading double-slashes, that the number of WinJS files to include is a far smaller number in the Beta. Now it’s just base.js and ui.js, which makes it easy to decide which one(s) you want and in what order to include them, fixing a common problem in the BUILD bits.</p>  <p>One other thing that’s new in the Blank Application template is that there are stubs for implementing tomb-stoning to easily save and restore your app’s session state in the default.js:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:07c59867-b719-4b20-8667-2e4906586fe4" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">default.js</div>      <div style="background: #ddd; max-height: 500px; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> app = WinJS.Application;</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li><span style="background: #ffffff; color: #000000">app.onactivated = </span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (eventObject) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> (eventObject.detail.kind === Windows.ApplicationModel.Activation.ActivationKind.launch) {</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> (eventObject.detail.previousExecutionState !== Windows.ApplicationModel.Activation.ApplicationExecutionState.terminated) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: This application has been newly launched. Initialize </span></li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// your application here.</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">} </span><span style="background: #ffffff; color: #0000ff">else</span><span style="background: #ffffff; color: #000000"> {</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: This application has been reactivated from suspension. </span></li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// Restore application state here.</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">WinJS.UI.processAll();</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">};</span> </li>          <li>&#160; </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">app.oncheckpoint = </span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (eventObject) {</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: This application is about to be suspended. Save any state</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// that needs to persist across suspensions here. You might use the </span></li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// WinJS.Application.sessionState object, which is automatically</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// saved and restored across suspension. If you need to complete an</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// asynchronous operation before your application is suspended, call</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// eventObject.setPromise(). </span></li>          <li><span style="background: #ffffff; color: #000000">};</span> </li>       </ol>     </div>   </div> </div>  <p>The handling of the terminated state in the onactivated event on line 3 and the checkpoint event handler on like 16 are for reactivating and saving your app state respectively.</p>  <p>And finally, the handy TODO comments are something you’ll find sprinkled throughout the templates based on usability feedback conducted to determine what developers really need help with as they add their own functionality to the app.</p>  <h3>Fixed Layout Application</h3>  <p>Moving up the complexity scale, the Fixed Layout Application template is meant to do just what it says – provide a jumping off point for apps that are logically fixed layout. The crux of this code is the use of the ViewBox control in the default.html:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:15058236-9480-452b-a252-e79df54efc78" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">default.html</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">body</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">data-win-control</span><span style="background: #ffffff; color: #0000ff">=&quot;WinJS.UI.ViewBox&quot;&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">class</span><span style="background: #ffffff; color: #0000ff">=&quot;fixedlayout&quot;&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">p</span><span style="background: #ffffff; color: #0000ff">&gt;</span><span style="background: #ffffff; color: #000000">Content goes here</span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">p</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">body</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>       </ol>     </div>   </div> </div>  <p>Line 2 wraps the content of the app in a ViewBox control, which will scale everything inside of it to the size of the content, which is defined in the default.css file with the fixedLayout style:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:0e2cadbb-a834-4d77-9b11-464691d7d889" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">default.css</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #800000">.fixedlayout</span><span style="background: #ffffff; color: #000000"> {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">-ms-grid-columns</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">1fr</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">-ms-grid-rows</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">1fr</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">display</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">-ms-grid</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">height</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">768px</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">width</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">1024px</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li><span style="background: #ffffff; color: #000000">}</span> </li>       </ol>     </div>   </div> </div>  <p>You’ll see in lines 5 and 6 that the height and width of the div contained in the ViewBox is 768x1024, which means that the content can be created using absolute positioning and sizing. The job of the ViewBox is as the app is resized, either the computer’s resolution changes or more likely the app is moved between landscape, portrait, split and full sizes, the ViewBox will scale the content to take up as much room as possible, keeping the aspect ratio constant and scaling the content such that the app itself can think of itself as logically 768x1024 (or whatever the top-level div’s size is). This is very handy for building things like casual games where you want scaling, but generally not flowing – you want to control where the Scrabble tiles are or the tic-tac-toe pieces and it’s much easier to do that with a fixed size.</p>  <p>And now that I’ve described it, I’ll tell you that this template is the only one that’s structurally identical between BUILD and Beta. Still, it is useful.</p>  <h3>Navigation Application</h3>  <p>The next one up the ladder is the Navigation Application template, which is where we get the Back button and the support for moving HTML fragments into and out of the DOM just like the user was logically navigation page-to-page. In the BUILD bits, this navigation functionality was packaged in the default.js file, but in the Beta, default.js is just the same as the simpler templates. Instead, the navigation functionality is packaged into a new file: navigator.js. The reason this file is separate is to make it clear if you’d like to implement a different navigation policy, e.g. MVC, then this is the file to start with. Further, while this functionality would seem a shoe-in to be included in WinJS, it’s not quite “baked” enough, which means that MS hasn’t yet decided that this is “the way” to do navigation.</p>  <p>Still, it’s “a way” to do navigation in a Metro/JS app and a pretty useful one. Essential the way it works is that there is a singleton PageControlNavigator in the default.html file that holds the pages as they’re swapped in. The default.html is also where navigator.js is included:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:32fac664-9b38-4b3e-be8a-437474acaf4e" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">default.html</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">src</span><span style="background: #ffffff; color: #0000ff">=&quot;/js/navigator.js&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">...</span> </li>          <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">id</span><span style="background: #ffffff; color: #0000ff">=&quot;contenthost&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">data-win-control</span><span style="background: #ffffff; color: #0000ff">=&quot;Application7.PageControlNavigator&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">data-win-options</span><span style="background: #ffffff; color: #0000ff">=&quot;{home: '/html/homePage.html'}&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>       </ol>     </div>   </div> </div>  <p>The navigator.js file defines the PageControlNavigator control, which holds the logical pages as the user clicks around in the application. The home parameter is where to start the navigation. Navigation is to a Page, which is really a mapping between an HTML file and a set of events to handle over the lifetime of that Page:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:05287935-74e4-4b23-95de-6b3638f3f833" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">homePage.js</div>      <div style="background: #ddd; max-height: 500px; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #008000">// This function is called whenever a user navigates to this page. It</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #008000">// populates the page elements with the app's data.</span> </li>          <li><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> ready(element, options) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: Initialize the fragment here.</span> </li>          <li><span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li><span style="background: #ffffff; color: #000000">WinJS.UI.Pages.define(</span><span style="background: #ffffff; color: #a31515">&quot;/html/homePage.html&quot;</span><span style="background: #ffffff; color: #000000">, {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">ready: ready</span> </li>          <li><span style="background: #ffffff; color: #000000">});</span> </li>       </ol>     </div>   </div> </div>  <p>Of course, navigating to the home page is going to be rare compared to navigating between pages. The easiest way to get a new page to add to your app is to right-click on your project in the Solution Explorer and select Add | New Item:</p>  <p><a href="/public/post-images/12716-129.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-130.png" width="644" height="364" /></a></p>  <p>The last item three item templates on the list are for shell contract implementations, which are beyond the scope of this blog post, but the first one is a Page Control, which gives us a triad of HTML, JS and CSS that fits exactly into the navigation model provided by the PageControlNavigator control:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:8d3ef646-01c1-4380-947c-7abc1cbd5c56" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">page2.html</div>      <div style="background: #ddd; max-height: 500px; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #0000ff">&lt;!</span><span style="background: #ffffff; color: #800000">DOCTYPE</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">html</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">html</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">head</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">meta</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">charset</span><span style="background: #ffffff; color: #0000ff">=&quot;utf-8&quot;&gt;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">title</span><span style="background: #ffffff; color: #0000ff">&gt;</span><span style="background: #ffffff; color: #000000">page2</span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">title</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #006400">&lt;!-- WinJS references --&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">link</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">href</span><span style="background: #ffffff; color: #0000ff">=&quot;//Microsoft.WinJS.0.6/css/ui-dark.css&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">rel</span><span style="background: #ffffff; color: #0000ff">=&quot;stylesheet&quot;&gt;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">src</span><span style="background: #ffffff; color: #0000ff">=&quot;//Microsoft.WinJS.0.6/js/base.js&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">src</span><span style="background: #ffffff; color: #0000ff">=&quot;//Microsoft.WinJS.0.6/js/ui.js&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span></li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">link</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">href</span><span style="background: #ffffff; color: #0000ff">=&quot;page2.css&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">rel</span><span style="background: #ffffff; color: #0000ff">=&quot;stylesheet&quot;&gt;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">src</span><span style="background: #ffffff; color: #0000ff">=&quot;page2.js&quot;&gt;&lt;/</span><span style="background: #ffffff; color: #800000">script</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">head</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">body</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">class</span><span style="background: #ffffff; color: #0000ff">=&quot;page2 fragment&quot;&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">header</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">aria-label</span><span style="background: #ffffff; color: #0000ff">=&quot;Header content&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">role</span><span style="background: #ffffff; color: #0000ff">=&quot;banner&quot;&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">button</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">class</span><span style="background: #ffffff; color: #0000ff">=&quot;win-backbutton&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">aria-label</span><span style="background: #ffffff; color: #0000ff">=&quot;Back&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">disabled</span><span style="background: #ffffff; color: #0000ff">&gt;&lt;/</span><span style="background: #ffffff; color: #800000">button</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">h1</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">class</span><span style="background: #ffffff; color: #0000ff">=&quot;titlearea win-type-ellipsis&quot;&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">span</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">class</span><span style="background: #ffffff; color: #0000ff">=&quot;pagetitle&quot;&gt;</span><span style="background: #ffffff; color: #000000">Welcome to page2</span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">span</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">h1</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">header</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">section</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">aria-label</span><span style="background: #ffffff; color: #0000ff">=&quot;Main content&quot;</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">role</span><span style="background: #ffffff; color: #0000ff">=&quot;main&quot;&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">p</span><span style="background: #ffffff; color: #0000ff">&gt;</span><span style="background: #ffffff; color: #000000">Content goes here.</span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">p</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">section</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">div</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">body</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">html</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>       </ol>     </div>   </div> </div>  <p>&#160;</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:8cb70abf-5758-4273-8260-3f3c546891e9" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">page2.cs</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #800000">.page2</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #800000">p</span><span style="background: #ffffff; color: #000000"> {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">margin-left</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">120px</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li><span style="background: #ffffff; color: #000000">}</span> </li>       </ol>     </div>   </div> </div>  <p>&#160;</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:019ca828-52a4-404d-bb75-bf124574b348" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">page2.js</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #008000">// This function is called whenever a user navigates to this page. It</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #008000">// populates the page elements with the app's data.</span> </li>          <li><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> ready(element, options) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: Initialize the fragment here.</span> </li>          <li><span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> updateLayout(element, viewState) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: Respond to changes in viewState.</span> </li>          <li><span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li><span style="background: #ffffff; color: #000000">WinJS.UI.Pages.define(</span><span style="background: #ffffff; color: #a31515">&quot;/page2.html&quot;</span><span style="background: #ffffff; color: #000000">, {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">ready: ready,</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">updateLayout: updateLayout</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">});</span> </li>       </ol>     </div>   </div> </div>  <p>Navigating to this new control defined by these files is a simple matter of calling the navigate method:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:ead6a908-bef3-4cf7-9b8e-f6486af504a3" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">homePage.html</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #0000ff">&lt;</span><span style="background: #ffffff; color: #800000">a</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #ff0000">onclick</span><span style="background: #ffffff; color: #0000ff">=&quot;WinJS.Navigation.navigate('/page2.html')&quot;&gt;</span><span style="background: #ffffff; color: #000000">Page 2</span><span style="background: #ffffff; color: #0000ff">&lt;/</span><span style="background: #ffffff; color: #800000">a</span><span style="background: #ffffff; color: #0000ff">&gt;</span> </li>       </ol>     </div>   </div> </div>  <p>As far as the user is concerned, the anchor tag shows up as a link like any other:</p>  <p><a href="/public/post-images/12716-131.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-132.png" width="644" height="156" /></a></p>  <p>Clicking on “Page 2” fires the onclick event, which calls the navigate method, passing in the path to the HTML file and causes the Page control defined in page2.html, page2.js and page2.css to be loaded:</p>  <p><a href="/public/post-images/12716-133.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-134.png" width="644" height="156" /></a>&#160;</p>  <p>In addition to whatever content on your Page control, notice that the Back button shows up automatically. The Back button manages navigation via clicking, touching and the browser keys; Ctrl+Left Arrow and Ctrl+Right Arrow work as Back and Forward respectively.</p>  <h3>Grid and Split Application</h3>  <p>At this point, we’ve covered almost all of the core concepts that make up the Grid and Split applications: they bring in WinJS by reference, they use controls and they use navigation via the Page controls. In fact, even though the Grid app has three pages and the Split app has two, they’re really just the navigation template with the pages to implement the Grid and Split app patterns that MS decided were the major app patterns appropriate for Win8. However, the Grid and Split application templates do have two major features that the other templates don’t have: support for multiple view states and a centralized data model.</p>  <p>Multiple view state support means that as the app is moved between portrait, landscape, full and split, the app adjusts itself to look good in all states. The view state management is mostly handled with CSS styles associated with media modes, like in the Split App’s itemsPage.css:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:604c22dd-392a-4cfa-b8a5-cfac149338ee" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">itemsPage.css</div>      <div style="background: #ddd; max-height: 500px; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #800000">...</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #800000">@media</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #800000">screen</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #800000">and</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #800000">(-ms-view-state:</span><span style="background: #ffffff; color: #000000"> </span><span style="background: #ffffff; color: #800000">snapped)</span><span style="background: #ffffff; color: #000000"> {</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">.itemspage .itemslist .win-vertical.win-viewport .win-surface {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #ff0000">margin-bottom</span><span style="background: #ffffff; color: #000000">: </span><span style="background: #ffffff; color: #0000ff">30px</span><span style="background: #ffffff; color: #000000">;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #800000">...</span> </li>       </ol>     </div>   </div> </div>  <p>In Metro/JS apps, MS has provided a media query predicate called -ms-view-state, which can be one of the four view states and the styles in the media query block will be applied when the app moves to that state. In addition, if you want to handle the view state change in JS, you can do so with updateLayout event in your Page control, like this snippet from itemsPage.js:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:580f74cf-273a-4196-af17-3ef3dacc1e92" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">itemsPage.js</div>      <div style="background: #ddd; max-height: 500px; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// This function updates the page layout in response to viewState changes.</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">updateLayout: </span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (element, viewState) {</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> listView = element.querySelector(</span><span style="background: #ffffff; color: #a31515">&quot;.itemslist&quot;</span><span style="background: #ffffff; color: #000000">).winControl;</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">if</span><span style="background: #ffffff; color: #000000"> (viewState === Windows.UI.ViewManagement.ApplicationViewState.snapped) {</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">listView.layout = </span><span style="background: #ffffff; color: #0000ff">new</span><span style="background: #ffffff; color: #000000"> ui.ListLayout();</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">} </span><span style="background: #ffffff; color: #0000ff">else</span><span style="background: #ffffff; color: #000000"> {</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">listView.layout = </span><span style="background: #ffffff; color: #0000ff">new</span><span style="background: #ffffff; color: #000000"> ui.GridLayout();</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>          <li><span style="background: #ffffff; color: #000000">}</span> </li>       </ol>     </div>   </div> </div>  <p>In this case, the updateLayout event is called when the control is initially created and as the app moves through the view states so it can change the layout style for the ListView control showing the contents of the page:</p>  <p><a href="/public/post-images/12716-135.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-136.png" width="343" height="484" /></a><a href="/public/post-images/12716-137.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-138.png" width="251" height="484" /></a></p>  <p><strong>Landscape vs. Snapped view state layout for the itemsPage ListView control</strong></p>  <p>The other major feature of the Grid and Split app templates – and this feature is new in the Beta bits – is the centralized data model, which is where the data for all pages comes from. This data model is defined in data.js and it contains the static group and item data as you just saw. The core of the data is exposed from data.js like so:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:88922e97-4361-43ef-b3a9-494e1086819f" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">data.js</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000">WinJS.Namespace.define(</span><span style="background: #ffffff; color: #a31515">&quot;data&quot;</span><span style="background: #ffffff; color: #000000">, {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">items: groupedItems,</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">groups: groupedItems.groups,</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">getItemsFromGroup: getItemsFromGroup</span> </li>          <li><span style="background: #ffffff; color: #000000">});</span> </li>       </ol>     </div>   </div> </div>  <p>These three members of the data object are used throughout the templates, e.g. in the itemsPage.js ready event handler:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:40aa5ee9-d867-4a1c-b819-5077f2d9caa5" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">itemsPage.js</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// This function is called whenever a user navigates to this page. It</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// populates the page elements with the app's data.</span> </li>          <li><span style="background: #ffffff; color: #000000">ready: </span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (element, options) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> listView = element.querySelector(</span><span style="background: #ffffff; color: #a31515">&quot;.itemslist&quot;</span><span style="background: #ffffff; color: #000000">).winControl;</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">ui.setOptions(listView, {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">itemDataSource: data.groups.dataSource,</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">itemTemplate: element.querySelector(</span><span style="background: #ffffff; color: #a31515">&quot;.itemtemplate&quot;</span><span style="background: #ffffff; color: #000000">),</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">oniteminvoked: </span><span style="background: #ffffff; color: #0000ff">this</span><span style="background: #ffffff; color: #000000">.itemInvoked.bind(</span><span style="background: #ffffff; color: #0000ff">this</span><span style="background: #ffffff; color: #000000">),</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">});</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">this</span><span style="background: #ffffff; color: #000000">.updateLayout(element, Windows.UI.ViewManagement.ApplicationView.value);</span> </li>          <li><span style="background: #ffffff; color: #000000">},</span> </li>       </ol>     </div>   </div> </div>  <p>Notice that the data.groups property is used on line 6 to perform a data binding operation. That data binding is against the dataSource property of the object returned from data.groups, which itself is created by a method on the WinJS.Binding.List object that holds the grouped item data. It’s this binding list, a new feature in WinJS for the Beta, that makes it easy to move from the static data provided by the templates and dynamic data that your app defines.</p>  <p>The binding list is a binding data source, which means that as you add items to it, it notifies any control that happens to be bound to it. This is especially handy when your app starts up with zero data, but you need to initialize the ListViews such that as the data is available (perhaps from an asynchronous network call), it will be shown.</p>  <p>If you open up the data.js, you’ll see the static sample data:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:6292256e-028d-4639-b496-b54ccd4e517b" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">static sample data</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// Each of these sample groups must have a unique key to be displayed</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// separately.</span> </li>          <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> sampleGroups = [</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{ key: </span><span style="background: #ffffff; color: #a31515">&quot;group1&quot;</span><span style="background: #ffffff; color: #000000">, title: </span><span style="background: #ffffff; color: #a31515">&quot;Group Title: 1&quot;</span><span style="background: #ffffff; color: #000000">, subtitle: </span><span style="background: #ffffff; color: #a31515">&quot;Group Subtitle: 1&quot;</span><span style="background: #ffffff; color: #000000">, backgroundImage: darkGray, description: groupDescription },</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">...</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">];</span> </li>          <li>&#160; </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// Each of these sample items should have a reference to a particular</span> </li>          <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// group.</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> sampleItems = [</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{ group: sampleGroups[0], title: </span><span style="background: #ffffff; color: #a31515">&quot;Item Title: 1&quot;</span><span style="background: #ffffff; color: #000000">, subtitle: </span><span style="background: #ffffff; color: #a31515">&quot;Item Subtitle: 1&quot;</span><span style="background: #ffffff; color: #000000">, description: itemDescription, content: itemContent, backgroundImage: lightGray },</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">...</span> </li>          <li><span style="background: #ffffff; color: #000000">];</span> </li>       </ol>     </div>   </div> </div>  <p>The group data has a unique key, a title, a subtitle, a background image and a description, which are all fields that the data templates used in the Split and Grid apps depend upon (although you can change them if you like). The item data has a reference to the group to which it belongs, a title, a subtitle, a description, a background image and the content for the item itself.</p>  <p>The code that populates the binding list with the sample data looks like this:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:acbec226-c92e-4927-bbd2-0a04b45d9cdc" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">statically bound data</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> list = </span><span style="background: #ffffff; color: #0000ff">new</span><span style="background: #ffffff; color: #000000"> WinJS.Binding.List();</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> groupedItems = list.createGrouped(groupKeySelector, groupDataSelector);</span> </li>          <li>&#160; </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// TODO: Replace the data with your real data.</span> </li>          <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// You can add data from asynchronous sources whenever it becomes available.</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">sampleItems.forEach(</span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (item) {</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">list.push(item);</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">});</span> </li>       </ol>     </div>   </div> </div>  <p>As the comment makes clear, it’s this code you’re most likely to want to change. Instead of pulling in static data from the sampleItems array, we want to pull the items in asynchronously, perhaps <a href="/12713">from an RSS feed or two just like my earlier post</a>:</p>  <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9ce6104f-a9aa-4a17-a79f-3a39532ebf7c:fabf93ef-d9ba-4d51-86a8-6a436eeb9f47" class="wlWriterSmartContent">   <div style="border-bottom: #000080 1px solid; border-left: #000080 1px solid; font-family: &#39;Courier New&#39;, courier, monospace; color: #000; font-size: 10pt; border-top: #000080 1px solid; border-right: #000080 1px solid">     <div style="padding-bottom: 2px; padding-left: 5px; padding-right: 5px; font-family: verdana, tahoma, arial, sans-serif; background: #000080; color: #fff; font-weight: bold; padding-top: 2px">dynamically bound data</div>      <div style="background: #ddd; overflow: auto">       <ol style="padding-bottom: 0px; margin: 0px 0px 0px 2.5em; padding-left: 5px; padding-right: 0px; background: #ffffff; padding-top: 0px">         <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> list = </span><span style="background: #ffffff; color: #0000ff">new</span><span style="background: #ffffff; color: #000000"> WinJS.Binding.List();</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> groupedItems = list.createGrouped(groupKeySelector, groupDataSelector);</span> </li>          <li>&#160; </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// RSS feeds</span> </li>          <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> feeds = [</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{ key: </span><span style="background: #ffffff; color: #a31515">&quot;feed1&quot;</span><span style="background: #ffffff; color: #000000">, title: </span><span style="background: #ffffff; color: #a31515">&quot;Scott Hanselman&quot;</span><span style="background: #ffffff; color: #000000">, subtitle: </span><span style="background: #ffffff; color: #a31515">&quot;a blog&quot;</span><span style="background: #ffffff; color: #000000">, backgroundImage: darkGray, description: </span><span style="background: #ffffff; color: #a31515">&quot;a blog&quot;</span><span style="background: #ffffff; color: #000000">, url: </span><span style="background: #ffffff; color: #a31515">&quot;http://feeds.feedburner.com/ScottHanselman&quot;</span><span style="background: #ffffff; color: #000000"> },</span> </li>          <li>&#160; </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{ key: </span><span style="background: #ffffff; color: #a31515">&quot;feed2&quot;</span><span style="background: #ffffff; color: #000000">, title: </span><span style="background: #ffffff; color: #a31515">&quot;Raymond Chen&quot;</span><span style="background: #ffffff; color: #000000">, subtitle: </span><span style="background: #ffffff; color: #a31515">&quot;a blog&quot;</span><span style="background: #ffffff; color: #000000">, backgroundImage: lightGray, description: </span><span style="background: #ffffff; color: #a31515">&quot;a blog&quot;</span><span style="background: #ffffff; color: #000000">, url: </span><span style="background: #ffffff; color: #a31515">&quot;http://blogs.msdn.com/b/oldnewthing/rss.aspx&quot;</span><span style="background: #ffffff; color: #000000"> },</span> </li>          <li>&#160; </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">{ key: </span><span style="background: #ffffff; color: #a31515">&quot;feed3&quot;</span><span style="background: #ffffff; color: #000000">, title: </span><span style="background: #ffffff; color: #a31515">&quot;Chris Sells&quot;</span><span style="background: #ffffff; color: #000000">, subtitle: </span><span style="background: #ffffff; color: #a31515">&quot;a blog&quot;</span><span style="background: #ffffff; color: #000000">, backgroundImage: mediumGray, description: </span><span style="background: #ffffff; color: #a31515">&quot;a blog&quot;</span><span style="background: #ffffff; color: #000000">, url: </span><span style="background: #ffffff; color: #a31515">&quot;http://sellsbrothers.com/posts/?format=rss&quot;</span><span style="background: #ffffff; color: #000000"> },</span> </li>          <li><span style="background: #ffffff; color: #000000">];</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li><span style="background: #ffffff; color: #000000">feeds.forEach(</span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (feed) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">WinJS.xhr({ url: feed.url }).then(</span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> (request) { processPosts(feed, request); });</span> </li>          <li><span style="background: #ffffff; color: #000000">});</span> </li>          <li style="background: #f3f3f3">&#160; </li>          <li><span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">function</span><span style="background: #ffffff; color: #000000"> processPosts(feed, request) {</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #008000">// parse the RSS</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> nodes = request.responseXML.selectNodes(</span><span style="background: #ffffff; color: #a31515">&quot;//item&quot;</span><span style="background: #ffffff; color: #000000">);</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">for</span><span style="background: #ffffff; color: #000000"> (</span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> i = 0, len = nodes.length; i &lt; len; i++) {</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> node = nodes[i];</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000"></span><span style="background: #ffffff; color: #0000ff">var</span><span style="background: #ffffff; color: #000000"> item = {</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">group: feed,</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">title: node.selectNodes(</span><span style="background: #ffffff; color: #a31515">&quot;title&quot;</span><span style="background: #ffffff; color: #000000">)[0].text,</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">subtitle: node.selectNodes(</span><span style="background: #ffffff; color: #a31515">&quot;pubDate&quot;</span><span style="background: #ffffff; color: #000000">)[0].text,</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">description: </span><span style="background: #ffffff; color: #a31515">&quot;a post&quot;</span><span style="background: #ffffff; color: #000000">,</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">content: node.selectNodes(</span><span style="background: #ffffff; color: #a31515">&quot;description&quot;</span><span style="background: #ffffff; color: #000000">)[0].text,</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">backgroundImage: feed.backgroundImage</span> </li>          <li>&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">};</span> </li>          <li style="background: #f3f3f3">&#160;&#160;&#160;&#160;&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">list.push(item);</span> </li>          <li>&#160;&#160;&#160; <span style="background: #ffffff; color: #000000">}</span> </li>          <li style="background: #f3f3f3"><span style="background: #ffffff; color: #000000">}</span> </li>       </ol>     </div>   </div> </div>  <p>In this case, our group data is a set of RSS feeds, being careful to continue to use the same group field names so I don’t have to update the data templates in the rest of the app. When the app loads, I still create a binding list, but instead of filling it directly, I start an async xhr call (the WinJS XMLHttpRequest wrapper) for each feed, creating an item for each RSS post I find upon a successful completion. Because I’ve left the data model alone and because I’m using the binding list, that’s all I have to change and now the entire app has been updated to support that data:</p>  <p><a href="/public/post-images/12716-139.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-140.png" width="365" height="772" /></a></p>  <p><strong>The items page with the set of feeds in the Split app template</strong></p>  <p><strong></strong></p>  <p><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/public/post-images/12716-141.png" width="594" height="484" /></p>  <p><strong>The split page with the posts from the selected feed</strong></p>  <h2></h2>  <h2>Where Are We?</h2>  <p>As you can see, the Metro/JS templates in the VS11 beta start simple and add features with navigation, pages with specific app pattern functionality, multiple view state support and a unified data model. The main difference is the Beta versions of this templates is that code has been simplified, beautified and pushed into WinJS as much as possible to make the inside of your app just as pretty and easy to use as the outside.</p>  <h2></h2>  <h2>Translation</h2>  <p>This article has been <a href="http://science.webhostinggeeks.com/sta-je-novo-u-beta">translated into Serbo-Croatian</a> by Jovana Milutinovich. Enjoy.</p>  
