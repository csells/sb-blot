<!--
Date: 6/5/2006 12:49:27 PM  -08:00
Permalink: 1995
Disqus: 1995
Tags: tools
-->
<h1>Web Application Project: "The type 'foo' exists in both 'some dll' and 'another dll'"</h1>
<P>In using the most excellent <A href="http://webproject.scottgu.com/">Web Application Project</A> support for ASP.NET 2.0 in VS05 from Mr. Guthrie and co, I ran into what was first an intermittent and then a constant problem that actually made it's way onto my live site (it worked on my machine!). The error looked like this against several classes in my app, i.e. when I'd comment out one, I'd get another class that showed the same problem:</P>
<H2><I><FONT face=Verdana color=maroon size=4><SPAN style="FONT-SIZE: 14pt; FONT-STYLE: italic">Compilation Error</SPAN></FONT></I> <?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" /><o:p></o:p></H2>
<P class=MsoNormal style="MARGIN-BOTTOM: 12pt"><B><FONT face=Verdana color=black size=1><SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Verdana">Description: </SPAN></FONT></B><FONT face=Arial color=black size=1><SPAN style="FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Arial">An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. <BR><BR></SPAN></FONT><B><FONT face=Verdana color=black size=1><SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Verdana">Compiler Error Message: </SPAN></FONT></B><FONT face=Arial color=black size=1><SPAN style="FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Arial">CS0433: The type 'ASP.clientredirector_ascx' exists in both 'c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\sb2\4d76034e\bec2c8d0\App_Web_clientredirector.ascx.cdcab7d2.zmdrab5k.dll' and 'c:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\sb2\4d76034e\bec2c8d0\App_Web_axhgbqrn.dll'<BR><BR></SPAN></FONT><B><FONT face=Verdana color=black size=1><SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Verdana">Source Error:</SPAN></FONT></B></P>
<P>
<TABLE class=MsoNormalTable style="BACKGROUND: #ffffcc; WIDTH: 100%" cellSpacing=3 cellPadding=0 width="100%" bgColor=#ffffcc border=0>
<TBODY>
<TR>
<TD style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt">
<P class=MsoNormal><FONT face=Verdana color=black size=1><SPAN style="FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Verdana"></SPAN></FONT></P></TD></TR>
<TR>
<TD style="PADDING-RIGHT: 0.75pt; PADDING-LEFT: 0.75pt; PADDING-BOTTOM: 0.75pt; PADDING-TOP: 0.75pt"><PRE><FONT face="Lucida Console" color=black size=1><SPAN style="FONT-SIZE: 9pt; COLOR: black">Line 11: <BR></SPAN></FONT><FONT face="Lucida Console" color=black size=1><SPAN style="FONT-SIZE: 9pt; COLOR: black">Line 12: &lt;!-- client redirector --&gt;<BR></SPAN></FONT><FONT face="Lucida Console" color=red size=1><SPAN style="FONT-SIZE: 9pt; COLOR: red">Line 13: &lt;sb:ClientRedirector runat="server" id="ClientRedirector" /&gt;<BR></SPAN></FONT><FONT face="Lucida Console" color=black size=1><SPAN style="FONT-SIZE: 9pt; COLOR: black">Line 14: <BR></SPAN></FONT><FONT face="Lucida Console" color=black size=1><SPAN style="FONT-SIZE: 9pt; COLOR: black">Line 15: &lt;!-- fragment monitor --&gt;</SPAN></FONT></PRE></TD></TR></TBODY></TABLE></P>
<P class=MsoNormal><B><FONT face=Verdana color=black size=1><SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Verdana">Source File:</SPAN></FONT></B><FONT face=Arial color=black size=1><SPAN style="FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Arial"> d:\project\mine\sb2\pageLayout.ascx &nbsp;&nbsp; </SPAN></FONT><B><FONT face=Verdana color=black size=1><SPAN style="FONT-WEIGHT: bold; FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Verdana">Line:</SPAN></FONT></B><FONT face=Arial color=black size=1><SPAN style="FONT-SIZE: 8.5pt; COLOR: black; FONT-FAMILY: Arial"> 13</SPAN></FONT></P>
<P>I chased this with my ISP a few days ago, but futzing with it made it go away mysteriously. When it came back, it came back with a vengeance and I pulled in every ASP.NET 2.0 resource I could think of to fix it, including sending ScottGu the FTP user name and password to sellsbrothers.com (my site hasn't fit into a reasonable .zip file for a while now : ).</P>
<P>The thing I did that fixed the problem (seemingly consistently), came from Scott himself; I added the batch="false" attribute to my compilation element in my web.config file:</P>
<P class=MsoNormal><FONT face="Courier New" color=blue size=2><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'">&lt;</SPAN></FONT><FONT face="Courier New" color=maroon size=2><SPAN style="FONT-SIZE: 10pt; COLOR: maroon; FONT-FAMILY: 'Courier New'">configuration ...</SPAN></FONT><FONT face="Courier New" size=2><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'"><FONT color=blue><SPAN style="COLOR: blue">&gt;<BR></SPAN></FONT></SPAN></FONT><FONT face="Courier New" color=blue size=2><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'">&nbsp; &lt;</SPAN></FONT><FONT face="Courier New" color=maroon size=2><SPAN style="FONT-SIZE: 10pt; COLOR: maroon; FONT-FAMILY: 'Courier New'">system.web</SPAN></FONT><FONT face="Courier New" color=blue size=2><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'">&gt;<BR>&nbsp;&nbsp;&nbsp; </SPAN></FONT><FONT face="Courier New" color=blue size=2><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'">&lt;</SPAN></FONT><FONT face="Courier New" color=maroon size=2><SPAN style="FONT-SIZE: 10pt; COLOR: maroon; FONT-FAMILY: 'Courier New'">compilation</SPAN></FONT><FONT face="Courier New" color=blue size=2><SPAN style="FONT-SIZE: 10pt; COLOR: blue; FONT-FAMILY: 'Courier New'">&nbsp;</SPAN></FONT><FONT face="Courier New" color=red size=2><SPAN style="FONT-SIZE: 10pt; COLOR: red; FONT-FAMILY: 'Courier New'">...</SPAN></FONT><FONT face="Courier New" size=2><SPAN style="FONT-SIZE: 10pt; FONT-FAMILY: 'Courier New'"><FONT color=blue><SPAN style="COLOR: blue"> </SPAN></FONT><B><FONT color=red><SPAN style="FONT-WEIGHT: bold; COLOR: red">batch</SPAN></FONT><FONT color=blue><SPAN style="COLOR: blue">=</SPAN></FONT>"<FONT color=blue><SPAN style="COLOR: blue">false</SPAN></FONT>"</B><FONT color=blue><SPAN style="COLOR: blue">/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<o:p></o:p></SPAN></FONT></SPAN></FONT></P>
<P>Apparently this ends up generating a lot more assemblies than 'batch="true"', but I don't know why that would fix the problem or even what's causing the problem. This never happens in <A href="http://www.amazon.com/gp/product/0321267966/">WinForms</A> or <A href="http://www.amazon.com/gp/product/0596101139/">Avalon</A>&nbsp;(and, of course, neither of those&nbsp;technologies have issues of their own...&nbsp;: ).</P>
<P>Thanks Scott, Ting-Hao, Simon and David!</P>
<p><i>Update: Microsoft has updated the Knowledge Base with <a href="http://support.microsoft.com/kb/919284">this issue</a></i></p>
