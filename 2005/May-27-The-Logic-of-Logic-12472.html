<!--
Date: 5/27/2005 12:00:00 AM  -08:00
Permalink: 12472
Disqus: 12472
Tags: spout
-->
<h1>The Logic of Logic</h1>
<p align="left">My son came to me the other day and said, &quot;Dad, I need help with a math problem.&quot; The problem went like this:</p><ul><li><p align="left">We're going out to dinner taking 1-6 grandparents, 1-10 parents and/or 1-40 children</li><li><p align="left">Grandparents cost $3 for dinner, parents $2 and children $0.50</li><li><p align="left">There must be 20 total people at dinner and it must cost $20</li><li><p align="left">How many grandparents, parents and children are going to dinner?</li></ul><p align="left">The reason this problem is interesting is because there are 3 variables, but only 2 equations:</p><ol><li><p align="left">grandparents * 3 + parents * 2 + children * .5 = 20</li><li><p align="left">grandparents + parents + children = 20</li></ol><p align="left">Being a coder, I sat down to write the program to enumerate all possible solutions:</p><p class="MsoNormal" style="text-autospace: none"><span style="font-size: 10.0pt; font-family: Courier New; color: blue">class</span><span style="font-size: 10.0pt; font-family: Courier New"> <span style="color:teal">Program</span> {<br>&nbsp; <span style="color:blue">static</span> <span style="color:blue">void</span> Main(<span style="color:blue">string</span>[] args) {<br>&nbsp;&nbsp;&nbsp; <span style="color:blue">for</span>( <span style="color:blue">int</span> grandparents = 1; grandparents &lt; 7; ++grandparents ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue">for</span>( <span style="color:blue">int</span> parents = 1; parents &lt; 11; ++parents ) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue">for</span>( <span style="color:blue">int</span> children = 2; children &lt; 41; children += 2 ) {<br><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue">double</span> dollars = grandparents * 3 + parents * 2 + children * .50;<span style="color:gray"><br></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue">int</span> people = grandparents + parents + children;<span style="color:gray"><br></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:blue">if</span>( dollars == 20 &amp;&amp; people == 20 ) {<br></b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style="color:teal">Console</span>.WriteLine(<span style="color:maroon">&quot;grand parents= {0}, parents= {1}, kids= {2}&quot;</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; grandparents, parents, children);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp; }<br>}</span></p><p class="MsoNormal">Running this program saves my son the time to figure out the solution through tedious trial-and-error (plus, he didn't even have to write the program, since I did that part -- tricky little bastard, isn't he?!?) by producing the following output:</p>
<pre>grand parents= 1, parents= 5, kids= 14</pre><p class="MsoNormal">That was all well and good 'til Alex, a friend of mine, boiled the problem down to a single-statement Prolog program for me (although this program doesn't capture the range of values the variables can take on):</p>
<pre>people_at_the_meal(Grandparents, Parents, Children) :-
  Grandparents * 3 + Parents * 2 + Children * 0.5 = 20,
  Grandparents + Parents + Children = 20.&nbsp;</pre><p align="left">Then I went on to regale Alex about the time my grandmother asked me to schedule her tennis tournament for her on my computer. She had requirements like, &quot;everyone has to place everyone else at least once&quot; and &quot;you have to lose twice to be out of the tournament&quot; and &quot;nobody can play twice in a row&quot; (it's not good politics for a computer program to kill old ladies...). My grandmother's problem statement doesn't fit the traditional algorithmic statements that I'm used to using computers for, nor was I ever able to re-form the problem in those terms (it's not like my grandma was ever going to leave me a bunch of money anyway...). Alex completely understood and informed me that the NBA has the same problem (with slightly sprier players) and they use logic programs to solve it. In fact, in his experience, these problems happen all the time in the business world.</p><p align="left">Constraint Logic Programs (CLPs) break down into constants, variables over ranges and relations of truth, which together make up the constraints in a logic system. In my son's case, the constants are the numbers, e.g. 3, 20, etc, the variables are the number of people of each type and the relations form the constraints, e.g. the sum of all people must be 20. The CLP &quot;solver&quot; (in Alex's parlance) provides the logic over a particular &quot;domain&quot; (real numbers in our case) and knows how to do all the iteration and forward and backward chaining to solve the people_at_the_meal problem. A different solver would be able to solve my grandmother's and the NBA's scheduling problem.</p><p align="left">It was only after most of this discussion that I realized that I recognized the syntax that Alex had produced: it was Prolog, a CLP language I had blocked. I had taken a Prolog course in it in college and absolutely hated it, but not because of the things that allowed me to solve these kinds of problems: that was great. The things I hated were all of the algorithmic things that I needed to be able to do that Prolog was terrible at, e.g. take input, product output, suck in facts from data external to the system (like the NBA player roster), etc. CLPs themselves are damn cool.</p>
